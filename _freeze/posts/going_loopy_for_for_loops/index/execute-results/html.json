{
  "hash": "3b7aca20add40ea05639e5a322d5db72",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Going Loopy for For Loops\"\ndate: \"01/04/2025\"\nabstract-title: \"ABSTRACT\"\nabstract: \"Whats the point of for loops? Well for looping of course. In this post I break down how to write for loops in R, how you can easily understand them, and compelling reasons that you might want to learn them yourself!\"\nimage: \"image.png\"\nformat: html\ntitle-block-banner: true #This is our banner\ninclude-after-body: \"../../html/html_footer.html\" #This is our footer\n---\n\n::: {.cell}\n\n:::\n\n\n\n# Introduction\n\nHere's the scene, you've started on your R coding journey, know how to create an object, how to discern between vectors and lists, maybe even written a few short scripts. Then all of a sudden your professor/teacher/boss pulls a fast one on you and introduces for loops. For loops? What are they? How's that work? Whats going on? You struggle through and complete the task, but didn't quite understand what was going on when they explained it to you... Well at least that's how it went for me.\n\nIn this post I wanted to quickly talk about for loops in R, specifically, I'm looking to cover:\n\n - What is really happening in a for loop\n - Where you can go to read about for loops in much (much) more detail\n - Why you might want to write a for loop\n - How you can start to write your own loops\n - And ironically, why I actually try to avoid using for loops\n \n# For Loops\n\nRealistically, all a for loop does, is say \"do this bit of code again and again until I say stop\". Lets imagine a completely unrealistic scenario where your boss asks you to write out the numbers 1 to 10. Why are they asking you to do this? I don't know, that's not really the point. So you do it:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#manually write out a list of numbers from 1 to 10\nmy_list_numbers <- c(1,2,3,4,5,6)\n\n#print these numbers\nprint(my_list_numbers)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1 2 3 4 5 6\n```\n\n\n:::\n:::\n\n\n\nOkay, clearly this is a dumb way to do this, I'm not even going to write out the whole thing. Instead, lets create our first for loop:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#write a for loop to print the numbers 1 to 10\nfor (i in 1:10){print(i)}\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1\n[1] 2\n[1] 3\n[1] 4\n[1] 5\n[1] 6\n[1] 7\n[1] 8\n[1] 9\n[1] 10\n```\n\n\n:::\n:::\n\n\n\nIn this simple (very unrealistic) example it seems pretty straight forward, but I think we can explain things a bit more. The \"For Loop\" is usually denoted like this; `for (i in n){f}` where:\n\n - \"i\" is the iteration (or current loop)\n - \"n\" is the range to loop over\n - \"f\" is the function or functions to loop over\n \n![For Loop](image.png)\n\nEverything that isn't highlighted is just the syntax of the for loop, but that doesn't mean it isn't also important to understand. Case and point, these next two code chunks will execute identically and produce the same results, even if they look a bit different.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#write a for loop to print the numbers 1 to 10\nfor (i in 1:10){print(i)}\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#write a for loop to print the numbers 1 to 10\nfor (i in 1:10){\n  print(i)\n}\n```\n:::\n\n\n\nFrom now on I will be writing our for loops using the second format because I think it is easier to follow, but just remember that this doesn't change how the code runs just how it looks. Time to dive in!\n\n## i The Iteration\n\n\"i\" can be anything, which is not super helpful (sorry). What might be helpful is just seeing an example. This code:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#write a for loop to print the numbers 1 to 10\nfor (PotatoSalad in 1:10){\n  print(PotatoSalad)\n}\n```\n:::\n\n\n\nwill produce the exact same result as this code:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#write a for loop to print the numbers 1 to 10\nfor (i in 1:10){\n  print(i)\n}\n```\n:::\n\n\n\nWe use \"i\" as an **i**teration counter (hence usually getting called \"i\") that keeps track of what loop we are on with respect to n. For our example above, n is 10. So on the first loop \"i\" is 1, on the second loop \"i\" is 2, on the third loop \"i\" is three..., all the way until \"i\" is 10. At that point, the for loop finishes. Hopefully it is now intuitive to see how `print(i)` produces the numbers it does.\n\n## n The Range\n\n\"n\" is the range of the loop. \"n\" tells the for loop two things;\n\n 1. How many times to continue looping\n 2. What elements to loop over\n \nIn our example above, n is 10. But wait, that's not quite right, n is actually **1 to 10**. This is an important distinction to make because it is usually one of the first places we make errors. Lets take a look:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#write a for loop to print the number 10 (spot the issue)\nfor (i in 10){\n  print(i)\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 10\n```\n\n\n:::\n:::\n\n\n\nAs you can see, when \"n\" is just 10, then the output is only the value \"10\". This is because  the **range** (AKA length) of \"n\" was only 1. An easy way to check this is to use the `length()` function:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlength(10)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlength(1:10)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 10\n```\n\n\n:::\n:::\n\n\n\nSo the first super important thing to remember is that \"n\" is a range, it has a point you want to start at, and a point you want to end at. The second super important thing to remember about \"n\" is that it directly tells the **specific** value to start and end at, and therefore determine the value that \"i\" is going to be. Here is a simple demonstration:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#write a for loop to print the numbers 15 to 22\nfor (i in 15:22){\n  print(i)\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 15\n[1] 16\n[1] 17\n[1] 18\n[1] 19\n[1] 20\n[1] 21\n[1] 22\n```\n\n\n:::\n:::\n\n\n\nIn this case, we started at 15 and ended at 22. So on the first loop, \"i\" is 15, second loop \"i\" is 16, etc.\n\nThe last super important thing to remember about \"n\" is that it does not have to be numeric! It took me a while to realise this, but it can allow you to do some cool things. Here is another quick example:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#create a vector of character elements\nn_range <- c(\"PotatoSalad\", \"FishFingers\", \"Im... Kinda Hungry\")\n\n#write a for loop to print this vector one element at a time\nfor (i in n_range){\n  print(i)\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"PotatoSalad\"\n[1] \"FishFingers\"\n[1] \"Im... Kinda Hungry\"\n```\n\n\n:::\n:::\n\n\n\nThis does throw a minor curve ball though. Did you notice that the code is now `for (i in n_range)`, there is no \"1:\" in front of \"n_range\", this is just because the object \"n_range\" already has a range of elements that we can loop over. Lets use `length()` again to show this:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlength(n_range)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3\n```\n\n\n:::\n:::\n\n\n\n\nIf you can remember these core things about for loops you will get very, very far with them. So to summarise. \"n\":\n\n - Must be a range, it needs a start and end point\n - Tells \"i\" what value it is going to be\n - Can be a numeric, or character!\n\n## f The Function\n\nThe final part of a for loop is by far the biggest part of the code, but it is ironically very straight forward to understand if you have a little bit of an R background. The function or functions inside a for loop are the exact same functions that you would be using outside a for loop! The hard part to figure out is where to place that stupid \"i\" value. Personally, I haven't been able to find a method of explaining where \"i\" goes other than by being very conscious of the purpose of your for loop. Start with simple and short loops and work your way to more complicated tasks, it will come naturally. Generally you will find that \"i\" only needs to be placed in a few key locations, however if you miss a spot, happy debugging!\n\n::: {.callout-note}\nWant to learn more about For Loops from the professionals? Check out the Iteration chapter in [R for Data Science](https://r4ds.had.co.nz/iteration.html?q=For%20L#for-loops)!\n:::\n\n# For Loops in Action\n\nSo far all I have done is demonstrate a very silly example of a for loop. The kind of example that really doesn't give you a compelling reason to learn how to write a for loop. The kind of examples I used to read that made me not bother learning for quite a while. So instead of demonstrating a million more half baked for loops lets just cut to chance and see how I implement a for loop in my day to day. (If this blog post does compel you to go on the learning journey - the link above will fill the gaps in what I've written )here.\n\n## The Scenario\n\nSomething I do almost every day is make maps. Usually fairly simple maps, often they show sample site locations, or coral monitoring locations, or the size of a seagrass meadow, things like that. These maps are included in static word documents and are often needed over large chunks of areas. However, the combination of a large study location, a high quantity of sample site locations, and a static output (can't put an interactive map into word), means that instead of one large map, I need to create lots of small maps for each little area.\n\nThis here, is an absolutely prime example of a compelling reason to use a for loop. To give you some numbers, in one of my projects I need to create 67 maps. If I was to manually write out the code for each of those 67 maps, my script would have 3886 lines of code just dedicated to creating the maps. Instead, I use a for loop and pull 67 maps out of less than 100 lines of code. Not only that, but I also reduce the chance of an error sneaking into my code by 67x.\n\nBelow is a simplified mock up of the code I would use for this, noting that I have used made up sampling locations for data privacy, and created interactive maps for your enjoyment. We will see the full code in action first, then break it down step by step.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#read in some example data that I made up\nexample_sites <- st_read(\"example_data.gpkg\")\n\n#extract an object that contains the three unique locations we are looking at\nlocations <- unique(example_sites$Location)\n\n#create a list that will store my maps\nlist_of_maps <- setNames(vector(\"list\", length(locations)), locations)\n\n#initialize the for loop\nfor (i in locations){\n  \n  #filter our dataset\n  sub_set_of_sites <- example_sites |> \n    filter(Location == i)\n  \n  #create a simple map\n  single_map <- tm_shape(sub_set_of_sites) +\n    tm_dots(shape = \"Site\", size = 1, col = \"Site\", fill = \"Site\") +\n    tm_text(\"Site\", size = 2, ymod = 1) +\n    tm_layout(legend.show = F)\n  \n  #add each map to the list\n  list_of_maps[[i]] <- single_map\n  \n}\n```\n:::\n\n\n\nHere is how one of the maps looks:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#view the map\nlist_of_maps[[\"Alligator Creek\"]]\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<style>.leaflet-container .leaflet-tmap401-pane img {\n\t\t\t\tmax-width: none !important;\n\t\t\t\tmax-height: none !important;\n\t\t\t\twidth: auto;\n\t\t\t\tpadding: 0;\n\t\t\t\t}\n</style>\n<div class=\"leaflet html-widget html-fill-item\" id=\"htmlwidget-90512ceb04996007e0ee\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-90512ceb04996007e0ee\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}},\"attributionControl\":true},\"calls\":[{\"method\":\"createMapPane\",\"args\":[\"tmap401\",401]},{\"method\":\"createMapPane\",\"args\":[\"tmap402\",402]},{\"method\":\"addLayersControl\",\"args\":[[\"Esri.WorldGrayCanvas\",\"OpenStreetMap\",\"Esri.WorldTopoMap\"],\"sub_set_of_sites\",{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"Esri.WorldGrayCanvas\",null,\"Esri.WorldGrayCanvas\",{\"minZoom\":0,\"maxZoom\":18,\"maxNativeZoom\":17,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenStreetMap\",null,\"OpenStreetMap\",{\"minZoom\":0,\"maxZoom\":18,\"maxNativeZoom\":17,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"Esri.WorldTopoMap\",null,\"Esri.WorldTopoMap\",{\"minZoom\":0,\"maxZoom\":18,\"maxNativeZoom\":17,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addMarkers\",\"args\":[-19.3040515988372,146.9397165697675,{\"iconUrl\":{\"data\":\"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%3E%0A%20%20%3Ccircle%20id%3D%22circle%22%20cx%3D%228%22%20cy%3D%228%22%20r%3D%227%22%20stroke%3D%22%231F77B4%22%20fill%3D%22%231F77B4%22%20stroke-opacity%3D%221%22%20fill-opacity%3D%221%22%20stroke-width%3D%221%22%20stroke-dash%3D%22%22%20baseSize%3D%2220%22%3E%3C%2Fcircle%3E%0A%3C%2Fsvg%3E\",\"index\":0},\"iconAnchorX\":8,\"iconAnchorY\":8,\"iconWidth\":null,\"iconHeight\":null},\"X0000001\",\"sub_set_of_sites\",{\"interactive\":true,\"className\":\"\",\"pane\":\"tmap401\",\"zIndexOffset\":100000},\"<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\\/style><div style=\\\"max-height:25em;padding-right:0px;\\\"><table>\\n\\t\\t\\t   <thead><tr><th colspan=\\\"2\\\"><\\/th><\\/thead><\\/tr><tr><td style=\\\"color: #888888;\\\"><nobr>Location<\\/nobr><\\/td><td align=\\\"right\\\"><nobr>Alligator Creek<\\/nobr><\\/td><\\/tr><tr><td style=\\\"color: #888888;\\\"><nobr>Site<\\/nobr><\\/td><td align=\\\"right\\\"><nobr>Site 1<\\/nobr><\\/td><\\/tr><\\/table><\\/div>\",null,null,null,null,{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]},{\"method\":\"addMarkers\",\"args\":[-19.30061773255813,146.9471566133722,{\"iconUrl\":{\"data\":\"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%3E%0A%20%20%3Crect%20id%3D%22rect%22%20x%3D%221%22%20y%3D%221%22%20height%3D%2214%22%20width%3D%2214%22%20stroke%3D%22%232CA02C%22%20fill%3D%22%232CA02C%22%20stroke-opacity%3D%221%22%20fill-opacity%3D%221%22%20stroke-width%3D%221%22%20stroke-dash%3D%22%22%20baseSize%3D%2220%22%3E%3C%2Frect%3E%0A%3C%2Fsvg%3E\",\"index\":0},\"iconAnchorX\":8,\"iconAnchorY\":8,\"iconWidth\":null,\"iconHeight\":null},\"X0000002\",\"sub_set_of_sites\",{\"interactive\":true,\"className\":\"\",\"pane\":\"tmap401\",\"zIndexOffset\":200000},\"<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\\/style><div style=\\\"max-height:25em;padding-right:0px;\\\"><table>\\n\\t\\t\\t   <thead><tr><th colspan=\\\"2\\\"><\\/th><\\/thead><\\/tr><tr><td style=\\\"color: #888888;\\\"><nobr>Location<\\/nobr><\\/td><td align=\\\"right\\\"><nobr>Alligator Creek<\\/nobr><\\/td><\\/tr><tr><td style=\\\"color: #888888;\\\"><nobr>Site<\\/nobr><\\/td><td align=\\\"right\\\"><nobr>Site 2<\\/nobr><\\/td><\\/tr><\\/table><\\/div>\",null,null,null,null,{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]},{\"method\":\"addMarkers\",\"args\":[-19.31263626453487,146.9448673691861,{\"iconUrl\":{\"data\":\"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%3E%0A%20%20%3Cpolygon%20id%3D%22diamond%22%20points%3D%228%2C1%201%2C8%208%2C15%2015%2C8%208%2C1%22%20stroke%3D%22%23E73F74%22%20fill%3D%22%23E73F74%22%20stroke-opacity%3D%221%22%20fill-opacity%3D%221%22%20stroke-width%3D%221%22%20stroke-dash%3D%22%22%20baseSize%3D%2220%22%3E%3C%2Fpolygon%3E%0A%3C%2Fsvg%3E\",\"index\":0},\"iconAnchorX\":8,\"iconAnchorY\":8,\"iconWidth\":null,\"iconHeight\":null},\"X0000003\",\"sub_set_of_sites\",{\"interactive\":true,\"className\":\"\",\"pane\":\"tmap401\",\"zIndexOffset\":300000},\"<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\\/style><div style=\\\"max-height:25em;padding-right:0px;\\\"><table>\\n\\t\\t\\t   <thead><tr><th colspan=\\\"2\\\"><\\/th><\\/thead><\\/tr><tr><td style=\\\"color: #888888;\\\"><nobr>Location<\\/nobr><\\/td><td align=\\\"right\\\"><nobr>Alligator Creek<\\/nobr><\\/td><\\/tr><tr><td style=\\\"color: #888888;\\\"><nobr>Site<\\/nobr><\\/td><td align=\\\"right\\\"><nobr>Site 3<\\/nobr><\\/td><\\/tr><\\/table><\\/div>\",null,null,null,null,{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]},{\"method\":\"addMarkers\",\"args\":[[-19.30280167151162,-19.29936780523255,-19.31138633720929],[146.9397165697675,146.9471566133722,146.9448673691861],{\"iconUrl\":{\"data\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGP6zwAAAgcBApocMXEAAAAASUVORK5CYII=\",\"index\":0},\"iconWidth\":1,\"iconHeight\":1},[\"X1\",\"X2\",\"X3\"],\"sub_set_of_sites\",{\"interactive\":true,\"draggable\":false,\"keyboard\":true,\"title\":\"\",\"alt\":\"\",\"zIndexOffset\":0,\"opacity\":1,\"riseOnHover\":false,\"riseOffset\":250,\"pane\":\"tmap402\"},null,null,null,null,[\"Site 1\",\"Site 2\",\"Site 3\"],{\"interactive\":false,\"permanent\":true,\"direction\":\"right\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"24px\",\"textOnly\":true,\"style\":{\"color\":\"#000000\"},\"className\":\"\",\"sticky\":true,\"pane\":\"tmap402\"},null]}],\"fitBounds\":[-19.31287663517441,146.9395677688954,-19.3003773619186,146.9473054142443,[]],\"limits\":{\"lat\":[-19.31263626453487,-19.29936780523255],\"lng\":[146.9397165697675,146.9471566133722]}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n## The Breakdown\n\nTime to take a closer look at whats happening here.\n\n1. First of all, i use a function called `st_read()` from the `sf` package to load in my dataset. For the purposes of this post, we don't need to worry about this package and its functions. Check out my other posts for more details on this area. What I will do here though, is show a sneak peak of the data.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#read in some example data that I made up\nexample_sites <- st_read(\"example_data.gpkg\")\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<table class=\"huxtable\" data-quarto-disable-processing=\"true\" style=\"border-collapse: collapse; border: 0px; margin-bottom: 2em; margin-top: 2em; width: 100%; margin-left: auto; margin-right: auto;  \">\n<col><col><col><col><tr>\n<th style=\"vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold; font-size: 9pt;\">Location</th><th style=\"vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold; font-size: 9pt;\">Site</th><th style=\"vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold; font-size: 9pt;\">X</th><th style=\"vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold; font-size: 9pt;\">Y</th></tr>\n<tr>\n<td style=\"vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">Alligator Creek</td><td style=\"vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">Site 1</td><td style=\"vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">147</td><td style=\"vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">-19.3</td></tr>\n<tr>\n<td style=\"vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">Alligator Creek</td><td style=\"vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">Site 2</td><td style=\"vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">147</td><td style=\"vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">-19.3</td></tr>\n<tr>\n<td style=\"vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">Alligator Creek</td><td style=\"vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">Site 3</td><td style=\"vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">147</td><td style=\"vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">-19.3</td></tr>\n<tr>\n<td style=\"vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">The Strand</td><td style=\"vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">Site 1</td><td style=\"vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">147</td><td style=\"vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">-19.2</td></tr>\n<tr>\n<td style=\"vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">Town Common</td><td style=\"vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">Site 1</td><td style=\"vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">147</td><td style=\"vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">-19.2</td></tr>\n<tr>\n<td style=\"vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">Town Common</td><td style=\"vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">Site 2</td><td style=\"vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">147</td><td style=\"vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">-19.2</td></tr>\n<tr>\n<td style=\"vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">Town Common</td><td style=\"vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">Site 3</td><td style=\"vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">147</td><td style=\"vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">-19.2</td></tr>\n<tr>\n<td style=\"vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">Magnetic Island</td><td style=\"vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">Site 1</td><td style=\"vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">147</td><td style=\"vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">-19.2</td></tr>\n<tr>\n<td style=\"vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">Magnetic Island</td><td style=\"vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">Site 2</td><td style=\"vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">147</td><td style=\"vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal; font-size: 9pt;\">-19.2</td></tr>\n</table>\n\n```\n\n:::\n:::\n\n\n\n2. From this dataset I then extract a vector of unique locations, which in this case we can easily see is just the four (Alligator Creek, The Strand, Town Common, Magnetic Island).\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#extract an object that contains the three unique locations we are looking at\nlocations <- unique(example_sites$Location)\n```\n:::\n\n\n\n3. I then create a list to store the outputs of my for loop. This step can be done in a wide range of ways, for example you could store each output as a separate object, if you know the number of outputs you could pre-define a list of that length to store the outputs (like I did), or if the number of outputs is a mystery you can grow the list as you go. There is no \"best\" way to do this, however it is generally frowned upon to grow the list as you go, as this can be computationally quite expensive. My recommendation would be to use the first two options, favoring a list with a pre-defined length if you can.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#create a list that will store my maps\nlist_of_maps <- setNames(vector(\"list\", length(locations)), locations)\n```\n:::\n\n\n\n4. The set up is done and it is now time to begin the for loop. This section of the code is a good time to review what we discussed above. We can see that I am going to loop over \"locations\", and for each loop \"i\" will become of the elements in \"locations\".\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#initialize the for loop\nfor (i in locations){\n```\n:::\n\n\n\n5. We are now working within the for loop. Remember, this section of the code will be run again and again and again. The first thing we do inside the for loop is take a subset of our data. We can filter the data by \"i\" because \"i\" has taken on the first element of \"location\".\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n  #filter our dataset\n  sub_set_of_sites <- example_sites |> \n    filter(Location == i)\n```\n:::\n\n\n\n6. Using the subset of the data, which will now only contains rows from one location thanks to our filter. We then create the map. I like to use the `tmap` package, however there is a wide range of options available. Maybe I will write a post on mapping with tmap one day... we will see.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n  #create a simple map\n  single_map <- tm_shape(sub_set_of_sites) +\n    tm_dots(shape = \"Site\", size = 1, col = \"Site\", fill = \"Site\") +\n    tm_text(\"Site\", size = 2, ymod = 1) +\n    tm_layout(legend.show = F)\n```\n:::\n\n\n\n7. The final step of our for loop is to save the output of the loop somewhere. This step can catch alot of people off guard, they write the perfect loop, they check everything runs properly, and then they forgot to save the output each loop. Shame.\n\nIn my case, I have put the map into the list that we defined earlier. Notice that because I named each item in the list, I can then place the map under the correct item using \"i\".\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n  #add each map to the list\n  list_of_maps[[i]] <- single_map\n  \n}\n```\n:::\n\n\n\n# Writing Your Own For Loop\n\nTo start writing your own for loops all you really need to do is start giving it a crack. Although, I do remember starting the journey and having trouble finding good opportunities. Here are hopefully some good points to get you going:\n\n - Don't try to create the worlds most complicated for loop on your first go, start small.\n - Look for places in your script that you have copied the same code, even a single repeat of code is an opportunity to practice a loop.\n - Is there a part of your script that breaks down something big to do something small. You could loop that small thing and do it more times!\n - Screw legit opportunities, why not just try:\n        - make 100 copies of the same table to fk with your boss.\n        - create a loop that grows an objective to a length of 100million and break your computer.\n        - put a loop inside a loop and see what happens (this one doesn't break your computer btw).\n        \nOnce again, I will link to the Iteration chapter in [R for Data Science](https://r4ds.had.co.nz/iteration.html?q=For%20L#for-loops) as this is the most comprehensive place to go for learning something new in R the right way.\n\n# Caveats \n\nAs always, I like to finish my posts with an acknowledgement of caveats. With respect to this post, please remember to take a random internet stranger's opinion with a grain of salt, refer to the linked educational resources, and think critically about the things you are learning and if they make sense to you. With respect to for loops, don't over do it with your new power! It is often cleaner and simpler to write two or three separate for loops rather than one complicated one. You can even sometimes cause memory overflows and crash your computer when writing loops for large datasets and using poor memory management techniques. \n\nFinally, the thing I have been alluding to this entire time, as of writing this post I currently try my best to avoid using for loops! Instead, I have been progressing in my journey of learning to use vectorised functions. To find out how you can take the next step from for loop to vectorised function, check out this [Loops and Vectorised Functions](../loops_and_vectorised_functions/index.qmd) blog post!\n\n ",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"../../site_libs/leaflet-1.3.1/leaflet.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/leaflet-1.3.1/leaflet.js\"></script>\n<link href=\"../../site_libs/leafletfix-1.0.0/leafletfix.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/proj4-2.6.2/proj4.min.js\"></script>\n<script src=\"../../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js\"></script>\n<link href=\"../../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/leaflet-binding-2.2.2/leaflet.js\"></script>\n<script src=\"../../site_libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js\"></script>\n<script src=\"../../site_libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}